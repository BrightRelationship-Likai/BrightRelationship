!function(){var tlog=window.tlog||[],body=document.getElementsByTagName("body")[0],pageId=body.getAttribute("data-page-id")||"",dataInfo=body.getAttribute("data-info")||"",domain=document.domain.split(".").slice(-2).join(".")+(location.port?":"+location.port:""),__tlogPreSet=window.__tlogPreSet||{},cookie={get:function(name){var i,c,ret,nameEQ=name+"=",ca=document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ)){try{ret=decodeURIComponent(c.substring(nameEQ.length,c.length))}catch(e){ret=unescape(c.substring(nameEQ.length,c.length))}return ret}}return null},set:function(name,value,days,path,domain,secure){var expires,date;"number"==typeof days?(date=new Date,date.setTime(date.getTime()+1e3*days),expires=date.toGMTString()):expires="string"==typeof days&&days,document.cookie=name+"="+encodeURIComponent(value)+(expires?";expires="+expires:"")+(path?";path="+path:"")+(domain?";domain="+domain:"")+(secure?";secure":"")}},xmlHttp=function(){try{return new XMLHttpRequest}catch(e){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}};tlog={post:function(){function formatParams(data){var i,arr=[];for(i in data)data.hasOwnProperty(i)&&arr.push(i+"="+data[i]);return arr.join("&")}var params=formatParams(this.params),xhr=xmlHttp();xhr.withCredentials=!0,xhr.open("POST",this.href,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send(params),this.params={page_id:pageId,data_info:dataInfo}},pug:function(){var param,url,hash,i,name,val,reg,omatch;if(arguments&&"object"==typeof arguments[0]){param=arguments[0],url=arguments[1]||window.location.href,url=url.split("#"),hash=url[1]||"",url=url[0];for(i in param)param.hasOwnProperty(i)&&(name=i,val=param[i],reg=new RegExp("([\\?&#])(("+name+"=)([^&#]*))(&?)","i"),omatch=url.match(reg),this.params[name]=val,0!==val&&!val&&omatch&&(omatch[5]&&omatch[2]?url=url.replace(omatch[2]+"&",""):omatch[1]&&omatch[2]?url=url.replace(omatch[0],""):""),0!==val&&!val||omatch||(url+=url.indexOf("?")>-1?"&"+name+"="+val:"?"+name+"="+val),((0===val||val)&&0===omatch||omatch&&val!=omatch[4])&&(url=url.replace(omatch[2],omatch[3]+val)));return hash&&(url+="#"+hash),arguments[1]||window.location.href==url?url:void(window.location.href=url)}},gup:function(name,url){var reg=new RegExp("[?&#]"+name+"=([^&#]+)","i"),ret=reg.exec(url);return ret?decodeURIComponent(ret[1]):""},stacks:"[object Array]"===Object.prototype.toString.call(tlog)?tlog:[],start:+new Date,cache:{url:encodeURIComponent(window.location.href),refer:encodeURIComponent(window.document.referrer),resolution:window.screen?window.screen.width+"X"+window.screen.height:"0X0"},href:"//statistic."+domain+"/statisticPlatform/tLog",src:"//statistic."+domain+"/statisticPlatform/tLog?page_id="+pageId+(dataInfo?"&data_info="+dataInfo:""),params:{page_id:pageId,data_info:dataInfo},timer:"",mscid:{},domain:domain,path:"/",defaultcode:"00000000",getTime:function(){return+new Date},load:function(source){var image,src=this.pug({t:this.getTime()},source);"Microsoft Internet Explorer"===navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<10?(image=new Image,image.src=src):this.post()},uid:function(){return(+new Date+Math.random()).toFixed(2)},toToday:function(){var date=new Date;return date.setHours(0,0,0,0),864e5-(this.getTime()-date.getTime())},getTlog:function(){return cookie.get("__tlog")||""},update:function(){var tmp,n_imscid,n_mscid,sessionId,if_mscid,il_mscid,ef_mscid,el_mscid,__tlog=this.getTlog(),url=window.location.href;return __tlog?(tmp=__tlog.split("|"),n_imscid=this.gup("imscid",url),n_mscid=this.gup("mscid",url),sessionId=tmp[0],if_mscid=tmp[1],il_mscid=tmp[2],ef_mscid=tmp[3],el_mscid=tmp[4],n_imscid&&il_mscid!==n_imscid&&(il_mscid=n_imscid),n_mscid&&ef_mscid!==n_mscid&&(el_mscid=n_mscid),cookie.set("__tlog",[sessionId,if_mscid,il_mscid,ef_mscid,el_mscid].join("|"),this.timer,this.path,this.domain),this.mscid={sessionId:sessionId,if_mscid:if_mscid,il_mscid:il_mscid,ef_mscid:ef_mscid,el_mscid:el_mscid},void 0):void this.defaultSet("update")},defaultSet:function(update){var sessionId=this.uid(),url=window.location.href,defaultcode=this.defaultcode,if_mscid=update?this.gup("imscid",url)||defaultcode:defaultcode,il_mscid=if_mscid,ef_mscid=update?this.gup("mscid",url)||this.defaultcode:defaultcode,el_mscid=ef_mscid;cookie.set("__tlog",[sessionId,if_mscid,il_mscid,ef_mscid,el_mscid].join("|"),this.timer,this.path,this.domain),this.mscid={sessionId:sessionId,if_mscid:if_mscid,il_mscid:il_mscid,ef_mscid:ef_mscid,el_mscid:el_mscid}},push:function(){var user_id,user_kind,__session_seq,__uv_seq,param,type,arr,id,adds,src,obj,add_obj,i,add;if(arguments.length){this.getTlog()||this.defaultSet("update"),this.isnew?(this.src=this.pug({isnew:1},this.src),delete this.isnew):this.src=this.pug({isnew:""},this.src),user_id=cookie.get("user_id")||0,user_kind=cookie.get("user_kind")||9,__session_seq=cookie.get("__session_seq")||0,__uv_seq=cookie.get("__uv_seq")||0,param=arguments[0].split(":"),type=param[0],arr=(param[1]||"").split("&"),id=arr[0],adds=arr.slice(1),src=this.pug(this.cache,this.src),obj={},add_obj={},src=this.pug(this.mscid,src);for(i in adds)adds.hasOwnProperty(i)&&adds[i].indexOf("=")>-1&&adds[i].indexOf("=")===adds[i].lastIndexOf("=")&&(add=adds[i].split("="),add_obj[add[0]]=add[1]);switch(src=this.pug(add_obj,src),type){case"p":__session_seq=__session_seq-0+1,__uv_seq=__uv_seq-0+1,cookie.set("__session_seq",__session_seq,this.timer,this.path,this.domain),cookie.set("__uv_seq",__uv_seq,Math.round(this.toToday()/1e3),this.path,this.domain),obj.type="p",id&&(obj.page_id=id);break;case"c":obj={c_id:id,type:"c"};break;case"s":obj={s_id:id,type:"s"};break;default:obj={v_stay_time:this.getTime()-this.start,type:"v"}}src=this.pug(obj,src),src=this.pug({user_id:user_id,user_kind:user_kind,session_seq:__session_seq,uv_seq:__uv_seq},src),this.load(src)}},init:function(){var arr,i,l,__uuid=cookie.get("__uuid"),__nnn_bad_na_=cookie.get("__nnn_bad_na_");for(__nnn_bad_na_&&(this.src=this.pug({__nnn_bad_na_:__nnn_bad_na_},this.src)),this.src=this.pug(__tlogPreSet,this.src),__uuid||(__uuid=this.uid(),cookie.set("__uuid",__uuid,63072e4,this.path,this.domain),this.isnew=1),this.cache.uuid=__uuid,this.update(),window.onbeforeunload=function(){tlog.push("v")},arr=this.stacks,this.push("p"),i=0,l=arr.length;i<l;i++)this.push(arr[i])}},tlog.init(),window.tlog=tlog}();